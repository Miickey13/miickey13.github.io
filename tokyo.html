<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–¢–æ–∫–∏–æ ‚Äì –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ (—Ç–æ–ø 10 —Å—ä—Å –∑–ª–∞—Ç–Ω–∏ –ø–∏–Ω–æ–≤–µ + –ø–æ–¥—Ä–æ–±–Ω–∏ —Ä–µ–∑—é–º–µ—Ç–∞)</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin>
  <style>
    html, body { height: 100%; margin: 0; }
    #map { height: 100%; width: 100%; }

    /* Sidebar (left) */
    .sidebar {
      position: absolute; top: 12px; left: 12px; z-index: 1100;
      background: rgba(255,255,255,.96); padding: 12px 12px; border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,.12);
      width: 280px; max-width: calc(100% - 24px);
      font: 14px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }
    .sidebar h4 { margin: 0 0 8px; font-size: 15px; }
    .sidebar .section { margin-top: 8px; }
    .checklist { display: grid; grid-template-columns: 1fr; gap: 6px; }
    .checklist label { display: flex; align-items: center; gap: 8px; cursor: pointer; }
    .checklist input { width: 16px; height: 16px; }

    /* Controls (top-right) */
    .controls {
      position: absolute; top: 12px; right: 12px; z-index: 1100;
      display: flex; flex-direction: column; gap: 8px;
    }
    .btn {
      background: #111827; color: #fff; border: none; border-radius: 8px;
      padding: 10px 12px; font: 14px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,.15);
    }
    .btn:disabled { opacity: .7; cursor: not-allowed; }

    /* Toast messages */
    .toast {
      position: absolute; bottom: 12px; left: 50%; transform: translateX(-50%);
      background: rgba(0,0,0,.86); color: #fff; padding: 8px 12px; border-radius: 8px;
      font: 13px/1.25 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; z-index: 1200;
      display: none;
    }

    /* Markers */
    .marker-dot { width: 16px; height: 16px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 0 1px rgba(0,0,0,.25); background: #3b82f6; }
    .dot-gold { background: linear-gradient(135deg, #f8d048, #d9a521); box-shadow: 0 0 0 1px rgba(120,86,0,.35), inset 0 0 0 1px rgba(255,255,255,.35); }
    .dot-hotel { background: #10b981; }

    /* Popups */
    .popup img { width: 100%; height: auto; border-radius: 8px; margin: 6px 0; display:block; }
    .popup .title { font-weight: 700; margin-bottom: 2px; }
    .popup .meta { font-size: 12px; opacity: .8; margin-bottom: 6px; }
    .popup a { text-decoration: none; color: #2563eb; font-size: 12px; }
    .popup .actions { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-top: 8px; }
    .btn.secondary { background: #374151; }
    .btn.info { background: #2563eb; }

    /* Modal with tabs */
    .modal-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,.5); display: none; z-index: 1300;
      align-items: center; justify-content: center; padding: 20px;
    }
    .modal {
      max-width: 820px; width: 100%; background: #fff; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.25);
      font: 15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; overflow: hidden;
    }
    .modal header { padding: 14px 16px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
    .modal header h3 { margin: 0; font-size: 18px; }
    .close { background: transparent; border: none; font-size: 22px; cursor: pointer; }

    .tabs { display: flex; gap: 8px; padding: 8px 12px; border-bottom: 1px solid #f1f1f1; }
    .tab-btn { background: #f3f4f6; border: none; padding: 6px 10px; border-radius: 999px; cursor: pointer; font-size: 13px; }
    .tab-btn.active { background: #111827; color: #fff; }
    .modal .content { padding: 14px 16px; max-height: 70vh; overflow: auto; }
    .modal .content img { width: 100%; height: auto; border-radius: 8px; margin: 6px 0 12px; }
    .chips { display: flex; flex-wrap: wrap; gap: 6px; margin: 0 0 10px; }
    .chip { background: #f3f4f6; color: #111827; font-size: 12px; padding: 4px 8px; border-radius: 999px; }
    .links a { color: #2563eb; text-decoration: none; }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Sidebar: category filters -->
  <div class="sidebar">
    <h4>–§–∏–ª—Ç—ä—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
    <div class="section checklist" id="filters">
      <label><input type="checkbox" data-cat="Temple/Shrine" checked> üõï –•—Ä–∞–º–æ–≤–µ/–°–≤–µ—Ç–∏–ª–∏—â–∞</label>
      <label><input type="checkbox" data-cat="Landmark/Observation" checked> üóº –õ–∞–Ω–¥–º–∞—Ä–∫–∏/–û–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–∏</label>
      <label><input type="checkbox" data-cat="Garden/Park" checked> üå≥ –ì—Ä–∞–¥–∏–Ω–∏/–ü–∞—Ä–∫–æ–≤–µ</label>
      <label><input type="checkbox" data-cat="Market/Food" checked> üêü –ü–∞–∑–∞—Ä–∏/–•—Ä–∞–Ω–∞</label>
      <label><input type="checkbox" data-cat="District/Neighborhood" checked> üèôÔ∏è –ö–≤–∞—Ä—Ç–∞–ª–∏</label>
      <label><input type="checkbox" data-cat="Museum/Art" checked> üñºÔ∏è –ú—É–∑–µ–∏/–ò–∑–∫—É—Å—Ç–≤–æ</label>
      <label><input type="checkbox" data-cat="Palace/Heritage" checked> üèØ –î–≤–æ—Ä–µ—Ü/–ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ</label>
      <label><input type="checkbox" data-cat="Hotel" checked> üè® –•–æ—Ç–µ–ª–∏</label>
      <label><input type="checkbox" data-cat="Other" checked> ‚ûï –î—Ä—É–≥–æ</label>
    </div>
    <div class="section" style="margin-top:10px;font-size:12px;opacity:.8;">
      <div>‚≠ê <b>–ó–ª–∞—Ç–µ–Ω –ø–∏–Ω</b> = Top 10 –¢–æ–∫–∏–æ</div>
      <div>üîµ –°–∏–Ω –ø–∏–Ω = –¥—Ä—É–≥–∏ –º–µ—Å—Ç–∞</div>
      <div>üü¢ –ó–µ–ª–µ–Ω –ø–∏–Ω = —Ö–æ—Ç–µ–ª</div>
    </div>
  </div>

  <!-- Controls (top-right) -->
  <div class="controls">
    <button id="locateBtn" class="btn">üìç –ü–æ–∫–∞–∂–∏ –∫—ä–¥–µ —Å—ä–º</button>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal">
      <header>
        <h3 id="modalTitle">–ó–∞–≥–ª–∞–≤–∏–µ</h3>
        <button class="close" id="modalClose" aria-label="–ó–∞—Ç–≤–æ—Ä–∏">√ó</button>
      </header>
      <div class="tabs">
        <button class="tab-btn active" data-tab="info">‚ÑπÔ∏è –ò–Ω—Ñ–æ</button>
        <button class="tab-btn" data-tab="photos">üì∏ –§–æ—Ç–æ –∏–¥–µ–∏</button>
      </div>
      <div class="content" id="modalContent"></div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
  <script>
    function showToast(msg, ms = 2200) {
      const el = document.getElementById('toast');
      el.textContent = msg;
      el.style.display = 'block';
      clearTimeout(el._t);
      el._t = setTimeout(() => el.style.display = 'none', ms);
    }
    function iconDiv(classNames) {
      return L.divIcon({ className: '', html: `<div class="${classNames}"></div>`, iconSize: [16,16], iconAnchor: [8,8] });
    }
    const wmf = (file) => `https://commons.wikimedia.org/wiki/Special:FilePath/${file}?width=640`;

    const HOTEL_ORIGIN = { lat: 35.6959, lng: 139.7062 }; // Petit Bali Higashi Shinjuku

    // ---------- DATA ----------
    // Each Top 10 entry now has: detailed BG summary + Google Images ideas in "gimages"
    const spots = [
      /* ===== Top 10 (gold pins) ===== */
      { name: "Sens≈ç-ji (Asakusa)", coords: [35.7148,139.7967], top: true, categories: ["Temple/Shrine"],
        img: wmf("Sensoji_Temple.JPG"),
        link: "https://en.wikipedia.org/wiki/Sens%C5%8D-ji",
        info: "–ù–∞–π-—Å—Ç–∞—Ä–∏—è—Ç –±—É–¥–∏—Å—Ç–∫–∏ —Ö—Ä–∞–º –≤ –¢–æ–∫–∏–æ (–æ—Å–Ω–æ–≤–∞–Ω 645 –≥.) —Å—ä—Å —Å–≤–µ—â–µ–Ω–∞—Ç–∞ —Å—Ç–∞—Ç—É—è –Ω–∞ –ö–∞–Ω–Ω–æ–Ω, –æ—Ç–∫—Ä–∏—Ç–∞ —Å–ø–æ—Ä–µ–¥ –ª–µ–≥–µ–Ω–¥–∞—Ç–∞ –æ—Ç –¥–≤–∞–º–∞ —Ä–∏–±–∞—Ä–∏ –ø—Ä–µ–∑ 628 –≥. –í—Ö–æ–¥—ä—Ç –º–∏–Ω–∞–≤–∞ –ø—Ä–µ–∑ –ö–∞–º–∏–Ω–∞—Ä–∏–º–æ–Ω (‚Äû–í—Ä–∞—Ç–∞ –Ω–∞ –≥—ä—Ä–º–∞‚Äú, –ø—ä—Ä–≤–æ –∏–∑–¥–∏–≥–Ω–∞—Ç–∞ –ø—Ä–µ–∑ 941 –≥., –¥–Ω–µ—Å —Å –≥–∏–≥–∞–Ω—Ç—Å–∫–∏—è —á–µ—Ä–≤–µ–Ω —Ñ–µ–Ω–µ—Ä), –ø–æ—Å–ª–µ –ø–æ –ù–∞–∫–∞–º–∏—Å–µ‚Äì–¥–æ—Ä—ù —Å –¥–µ—Å–µ—Ç–∫–∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∏ –º–∞–≥–∞–∑–∏–Ω–∏ –¥–æ –≤—ä—Ç—Ä–µ—à–Ω–∞—Ç–∞ –•–æ–∑–æ–º–æ–Ω (‚Äû–°—ä–∫—Ä–æ–≤–∏—â–Ω–∞ –≤—Ä–∞—Ç–∞‚Äú) –∏ –ø–µ—Ç–µ—Ç–∞–∂–Ω–∞—Ç–∞ –ø–∞–≥–æ–¥–∞ (–≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∞ 1973). –û—Å–Ω–æ–≤–Ω–∞—Ç–∞ –∑–∞–ª–∞ –∏ –ø–∞–≥–æ–¥–∞—Ç–∞ —Å–∞ —Ä–∞–∑—Ä—É—à–µ–Ω–∏ –ø—Ä–∏ –≤—ä–∑–¥—É—à–Ω–∏—Ç–µ –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤–∫–∏ –Ω–∞ 10 –º–∞—Ä—Ç 1945 –≥. –∏ —Å–∞ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏ (–ø–æ–∫—Ä–∏–≤—ä—Ç –µ –æ—Ç —Ç–∏—Ç–∞–Ω –∑–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç). –î–æ —Ö—Ä–∞–º–∞ –µ —à–∏–Ω—Ç–æ–∏—Å—Ç–∫–æ—Ç–æ —Å–≤–µ—Ç–∏–ª–∏—â–µ –ê—Å–∞–∫—É—Å–∞‚Äì–¥–∂–∏–Ω–¥–∂–∞ (–æ—Ü–µ–ª—è–ª–æ –≤—ä–≤ –í—Ç–æ—Ä–∞—Ç–∞ —Å–≤–µ—Ç–æ–≤–Ω–∞), –∞ –Ω–∞–π-–≥–æ–ª–µ–º–∏—è—Ç —Ñ–µ—Å—Ç–∏–≤–∞–ª –µ –°–∞–Ω—è –ú–∞—Ü—É—Ä–∏ –≤ –∫—Ä–∞—è –Ω–∞ –ø—Ä–æ–ª–µ—Ç—Ç–∞.",
        pinterest: ["https://www.pinterest.com/ideas/sensoji-temple/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Sensoji+Temple+night+lantern",
          "https://www.google.com/search?tbm=isch&q=Kaminarimon+lantern+detail",
          "https://www.google.com/search?tbm=isch&q=Nakamise+street+rain+Tokyo"
        ]
      },
      { name: "Shibuya Crossing", coords: [35.6595,139.7005], top: true, categories: ["District/Neighborhood","Landmark/Observation"],
        img: wmf("Tokyo_Shibuya_Scramble_Crossing_2018-10-09.jpg"),
        link: "https://en.wikipedia.org/wiki/Shibuya_Crossing",
        info: "–ù–∞–π-–∏–∑–≤–µ—Å—Ç–Ω–æ—Ç–æ ‚Äû—Å–∫—Ä–∞–º–±—ä–ª‚Äú –ø—Ä–µ—Å–∏—á–∞–Ω–µ –≤ —Å–≤–µ—Ç–∞ (–æ—Ç 1973 –≥.), —Ç–æ—á–Ω–æ –ø—Ä–µ–¥ –∏–∑—Ö–æ–¥ ‚Äû–•–∞—á–∏–∫–æ‚Äú –Ω–∞ –≥–∞—Ä–∞ –®–∏–±—É—è. –ü—Ä–∏ –∑–µ–ª–µ–Ω–æ –ø—Ä–µ–º–∏–Ω–∞–≤–∞—Ç –¥–æ ~3000 –¥—É—à–∏ –Ω–∞–≤–µ–¥–Ω—ä–∂; –¥–µ–Ω–æ–Ω–æ—â–µ–Ω –ø–æ—Ç–æ–∫, –æ–≥—Ä–æ–º–Ω–∏ –µ–∫—Ä–∞–Ω–∏ (–Ω–∞–ø—Ä. QFRONT) –∏ —Ä–µ–∫–ª–∞–º–∏ –≤ —Å—Ç–∏–ª ‚Äû–¢–∞–π–º—Å –°–∫—É–µ—ä—Ä‚Äú. –î–æ –∫—Ä—ä—Å—Ç–æ–≤–∏—â–µ—Ç–æ –µ —Å—Ç–∞—Ç—É—è—Ç–∞ –Ω–∞ –•–∞—á–∏–∫–æ (1934, –æ–±–Ω–æ–≤–µ–Ω–∞ 1948). –ü–æ—Ä–∞–¥–∏ –ø—Ä–µ–Ω–∞—Å–µ–ª–µ–Ω–∏ —Ç—ä–ª–ø–∏ –≤ –Ω–æ—â–∏—Ç–µ –æ–∫–æ–ª–æ –•–µ–ª–æ—É–∏–Ω –∏ –ù–æ–≤–∞ –≥–æ–¥–∏–Ω–∞, —Ä–∞–π–æ–Ω—ä—Ç –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ –∞–ª–∫–æ—Ö–æ–ª–∞ –∏ –∑–∞—Å–∏–ª–≤–∞ –º–µ—Ä–∫–∏—Ç–µ –∑–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç.",
        pinterest: ["https://www.pinterest.com/ideas/shibuya-crossing-photography/908547542559/","https://www.pinterest.com/ideas/shibuya-crossing-pose/938727350401/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Shibuya+Crossing+long+exposure",
          "https://www.google.com/search?tbm=isch&q=Shibuya+Crossing+rain+umbrella",
          "https://www.google.com/search?tbm=isch&q=Shibuya+Crossing+Halloween+crowd"
        ]
      },
      { name: "Meiji Shrine (Meiji Jing≈´)", coords: [35.6764,139.6993], top: true, categories: ["Temple/Shrine","Garden/Park"],
        img: wmf("Meiji_Shrine_-_Main_building.jpg"),
        link: "https://en.wikipedia.org/wiki/Meiji_Shrine",
        info: "–®–∏–Ω—Ç–æ —Å–≤–µ—Ç–∏–ª–∏—â–µ, –ø–æ—Å–≤–µ—Ç–µ–Ω–æ –Ω–∞ –æ–±–æ–∂–µ—Å—Ç–≤–µ–Ω–∏—Ç–µ –¥—É—Ö–æ–≤–µ –Ω–∞ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä –ú–µ–π–¥–∂–∏ –∏ –∏–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ –®—å–æ–∫–µ–Ω. –ò–∑–≥—Ä–∞–¥–µ–Ω–æ –µ –∫–∞—Ç–æ –Ω–∞—Ü–∏–æ–Ω–∞–ª–µ–Ω –ø—Ä–æ–µ–∫—Ç: —Å—Ç—Ä–æ–µ–∂ –æ—Ç 1915 –≥. (–∞—Ä—Ö. –ò—Ç≈ç –ß≈´—Ç–∞), –æ—Ç–∫—Ä–∏—Ç–æ –∏ –ø–æ—Å–≤–µ—Ç–µ–Ω–æ –Ω–∞ 3 –Ω–æ–µ–º–≤—Ä–∏ 1920 –≥., –∞ —Ç–µ—Ä–µ–Ω–∏—Ç–µ —Å–∞ –∑–∞–≤—ä—Ä—à–µ–Ω–∏ –ø—Ä–µ–∑ 1926 –≥. –û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è—Ç –∫–æ–º–ø–ª–µ–∫—Å –µ —Ä–∞–∑—Ä—É—à–µ–Ω –ø—Ä–∏ –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤–∫–∏—Ç–µ –ø—Ä–µ–∑ 1945 –≥.; –¥–Ω–µ—à–Ω–∞—Ç–∞ —Å–≥—Ä–∞–¥–∞ –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞ –ø—Ä–µ–∑ 1958 –≥. –ì–æ—Ä–∞—Ç–∞ (–æ–∫. 70 —Ö–∞) —Å—ä–¥—ä—Ä–∂–∞ ~120 000 –¥—ä—Ä–≤–µ—Ç–∞ –æ—Ç 365 –≤–∏–¥–∞, –¥–∞—Ä–µ–Ω–∏ –æ—Ç —Ü—è–ª–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∞. –í—ä–Ω—à–Ω–∏—è—Ç –∫–æ–º–ø–ª–µ–∫—Å –ì–∞–π–µ–Ω –≤–∫–ª—é—á–≤–∞ —Å–ø–æ—Ä—Ç–Ω–∏ —Å—ä–æ—Ä—ä–∂–µ–Ω–∏—è –∏ –ì–∞–ª–µ—Ä–∏—è—Ç–∞ —Å 80 –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ —Å—Ç–µ–Ω–Ω–∏ –ø–∞–Ω–µ–ª–∞; —Ç—É–∫ —á–µ—Å—Ç–æ —Å–µ –≤–∏–∂–¥–∞—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∏ —Å–≤–∞—Ç–±–∏.",
        pinterest: ["https://www.pinterest.com/ideas/meiji-shrine/898738351729/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Meiji+Shrine+torii+gate+forest",
          "https://www.google.com/search?tbm=isch&q=Meiji+Jingu+wedding+procession",
          "https://www.google.com/search?tbm=isch&q=Meiji+Shrine+sake+barrels"
        ]
      },
      { name: "Tokyo Skytree", coords: [35.7101,139.8107], top: true, categories: ["Landmark/Observation"],
        img: wmf("Tokyo_Skytree_Japan.jpg"),
        link: "https://en.wikipedia.org/wiki/Tokyo_Skytree",
        info: "–ò–∑–¥–∏–≥–Ω–∞—Ç–∞ –¥–æ –∫—Ä–∞–π–Ω–∞—Ç–∞ –≤–∏—Å–æ—á–∏–Ω–∞ 634 –º (‚Äû–ú—É—Å–∞—à–∏‚Äú) –ø—Ä–µ–∑ –º–∞—Ä—Ç 2011 –≥.; –æ—Ç–∫—Ä–∏—Ç–∞ 2012 –≥. ‚Äì –Ω–∞–π-–≤–∏—Å–æ–∫–∞—Ç–∞ –∫—É–ª–∞ –≤ —Å–≤–µ—Ç–∞ –∏ –¥–æ–º–∏–Ω–∏—Ä–∞—â –¢–í/—Ä–∞–¥–∏–æ –ø—Ä–µ–¥–∞–≤–∞—Ç–µ–ª –∑–∞ —Ä–µ–≥–∏–æ–Ω–∞. –î–≤–µ –ø–ª–æ—â–∞–¥–∫–∏: –¢–µ–º–±–æ –î–µ–∫ (–æ–∫. 350 –º) –∏ –¢–µ–º–±–æ –ì–∞–ª–µ—Ä–∏—è (–æ–∫. 450 –º) —Å –ø–∞–Ω–æ—Ä–∞–º–∏ –∫—ä–º –§—É–¥–∂–∏ –ø—Ä–∏ —è—Å–Ω–æ –≤—Ä–µ–º–µ. –î–∏–∑–∞–π–Ω—ä—Ç –∏ —Å–µ–∏–∑–º–∏—á–Ω–∞—Ç–∞ –∏–∑–¥—Ä—ä–∂–ª–∏–≤–æ—Å—Ç —Å–∞ –∫–ª—é—á–æ–≤–∏, –∞ –Ω–æ—â–Ω–∏—Ç–µ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è –≤–∞—Ä–∏—Ä–∞—Ç –ø–æ —Ç–µ–º–∏.",
        pinterest: ["https://www.pinterest.com/ideas/tokyo-skytree/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Tokyo+Skytree+sunset+view",
          "https://www.google.com/search?tbm=isch&q=Tokyo+Skytree+illumination+night",
          "https://www.google.com/search?tbm=isch&q=Tokyo+Skytree+view+Mt+Fuji"
        ]
      },
      { name: "Tokyo Tower", coords: [35.6586,139.7456], top: true, categories: ["Landmark/Observation"],
        img: wmf("TOKYO_TOWER.jpg"),
        link: "https://en.wikipedia.org/wiki/Tokyo_Tower",
        info: "–ö–ª–∞—Å–∏—á–µ—Å–∫–∏—è—Ç —Å–∏–º–≤–æ–ª –Ω–∞ —Å—Ç–æ–ª–∏—Ü–∞—Ç–∞ (–æ—Ç–∫—Ä–∏—Ç–∞ 23.12.1958), –≤–∏—Å–æ—á–∏–Ω–∞ 332,9 –º. –ü—Ä–∏ –∑–∞–≤—ä—Ä—à–≤–∞–Ω–µ –µ –ø–æ-–≤–∏—Å–æ–∫–∞ –æ—Ç –ê–π—Ñ–µ–ª–æ–≤–∞—Ç–∞ –∫—É–ª–∞ –∏ –¥—ä–ª–≥–æ –µ –Ω–∞–π-–≤–∏—Å–æ–∫–∞—Ç–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ –Ø–ø–æ–Ω–∏—è (–¥–æ 2012 –≥.). –ë–æ—è–¥–∏—Å–∞–Ω–∞ –µ –≤ –∞–≤–∏–∞—Ü–∏–æ–Ω–Ω–∏ ‚Äû–∏–Ω—Ç–µ—Ä–Ω–µ—à—ä–Ω—ä–ª –æ—Ä–∞–Ω–∂–µ–≤–æ/–±—è–ª–æ‚Äú –∑–∞ –≤–∏–¥–∏–º–æ—Å—Ç; –∏–º–∞ –¥–≤–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–Ω–∏ –ø–ª–æ—â–∞–¥–∫–∏ (–æ–∫. 150 –∏ 250 –º). –ü–æ—Å—Ç—Ä–æ–µ–Ω–∞ –∑–∞ —Ä–∞–¥–∏–æ/–¢–í –∞–Ω—Ç–µ–Ω–∞, –¥–Ω–µ—Å –µ –∏ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞ –∞—Ç—Ä–∞–∫—Ü–∏—è —Å –≤–µ—á–µ—Ä–Ω–∏ –∏ —Å–µ–∑–æ–Ω–Ω–∏ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è.",
        pinterest: ["https://www.pinterest.com/ideas/tokyo-tower-photography/910331690831/","https://www.pinterest.com/ideas/tokyo-tower-photoshoot/937465798533/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Tokyo+Tower+night+illumination",
          "https://www.google.com/search?tbm=isch&q=Tokyo+Tower+view+from+Azabudai+Hills",
          "https://www.google.com/search?tbm=isch&q=Tokyo+Tower+sunset+silhouette"
        ]
      },
      { name: "Shinjuku Gyoen National Garden", coords: [35.6853,139.7094], top: true, categories: ["Garden/Park"],
        img: wmf("Shinjuku_Gyoen_National_Garden_-_DSC05149.JPG"),
        link: "https://en.wikipedia.org/wiki/Shinjuku_Gyo-en",
        info: "–ï–¥–Ω–∞ –æ—Ç –Ω–∞–π-–≥–æ–ª–µ–º–∏—Ç–µ –∏ –∫—Ä–∞—Å–∏–≤–∏ –≥—Ä–∞–¥–∏–Ω–∏ –≤ –¢–æ–∫–∏–æ: –ø–ª–æ—â ~58,3 —Ö–∞ –∏ –æ–±–∏–∫–æ–ª–∫–∞ ~3,5 –∫–º; —Å—ä—á–µ—Ç–∞–≤–∞ —è–ø–æ–Ω—Å–∫–∞ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞, —Ñ—Ä–µ–Ω—Å–∫–∞ —Ñ–æ—Ä–º–∞–ª–Ω–∞ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∞ –ª–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞ —á–∞—Å—Ç–∏, –ø–ª—é—Å –æ—Ä–∞–Ω–∂–µ—Ä–∏—è. –û—Ç–≤–æ—Ä–µ–Ω–∞ –∑–∞ –æ–±—â–µ—Å—Ç–≤–µ–Ω–æ—Å—Ç—Ç–∞ –æ—Ç 1949 –≥.; —Ç—É–∫ –ø—Ä–µ–∑ 1989 –≥. —Å–∞ –ø—Ä–æ—â–∞–ª–Ω–∏—Ç–µ —Ü–µ—Ä–µ–º–æ–Ω–∏–∏ –Ω–∞ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä –•–∏—Ä–æ—Ö–∏—Ç–æ. –ù–∞–¥ 20 000 –¥—ä—Ä–≤–µ—Ç–∞ –∏ ~1500 —á–µ—Ä–µ—à–∏ –æ—Ç –º–Ω–æ–≥–æ —Å–æ—Ä—Ç–æ–≤–µ –æ—Å–∏–≥—É—Ä—è–≤–∞—Ç –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–µ–Ω —Å–∞–∫—É—Ä–∞ —Å–µ–∑–æ–Ω (–∫—Ä–∞—è –Ω–∞ –º–∞—Ä—Ç‚Äì–∞–ø—Ä–∏–ª).",
        pinterest: ["https://www.pinterest.com/ideas/shinjuku-gyoen-national-garden/945946352205/","https://www.pinterest.com/pin/125397170861611227/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Shinjuku+Gyoen+cherry+blossom+spring",
          "https://www.google.com/search?tbm=isch&q=Shinjuku+Gyoen+autumn+foliage",
          "https://www.google.com/search?tbm=isch&q=Shinjuku+Gyoen+teahouse+pond"
        ]
      },
      { name: "Tsukiji Outer Market", coords: [35.6655,139.7708], top: true, categories: ["Market/Food"],
        img: wmf("Tsukiji_Outer_Market_-01.jpg"),
        link: "https://en.wikipedia.org/wiki/Tsukiji_fish_market",
        info: "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—è—Ç —Ä–∏–±–µ–Ω –ø–∞–∑–∞—Ä –¶—É–∫–∏–¥–∂–∏ (–æ—Ç–∫—Ä–∏—Ç 1935) –±–µ –Ω–∞–π-–≥–æ–ª–µ–º–∏—è—Ç –Ω–∞ –µ–¥—Ä–æ –≤ —Å–≤–µ—Ç–∞ –¥–æ –ø—Ä–µ–º–µ—Å—Ç–≤–∞–Ω–µ—Ç–æ –≤ –¢–æ–π–æ—Å—É –ø—Ä–µ–∑ –æ–∫—Ç–æ–º–≤—Ä–∏ 2018 –≥. –î–Ω–µ—Å ‚ÄûOuter Market‚Äú –æ—Å—Ç–∞–≤–∞ –æ–∂–∏–≤–µ–Ω –ª–∞–±–∏—Ä–∏–Ω—Ç –æ—Ç –º–∞–≥–∞–∑–∏–Ω–∏, —Ö—Ä–∞–Ω–∞ –Ω–∞ —É–ª–∏—Ü–∞—Ç–∞ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—Ç–∏ (—Å—É—à–∏ –Ω–∞ –∑–∞–∫—É—Å–∫–∞, —Ç–∞–º–∞–≥–æ—è–∫–∏, –º–æ—Ä—Å–∫–∏ –¥–∞—Ä–æ–≤–µ). –†–∞–π–æ–Ω—ä—Ç –ø—Ä–µ–∂–∏–≤—è–≤–∞ –ø–æ–∂–∞—Ä–∏ (2017) –∏ –≤ –º–æ–º–µ–Ω—Ç–∞ —Å–µ –ø–ª–∞–Ω–∏—Ä–∞ –º–∞—â–∞–±–Ω–æ –ø—Ä–µ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ –±–∏–≤—à–∞—Ç–∞ –≤—ä—Ç—Ä–µ—à–Ω–∞ –ø–ª–æ—â–∞–¥–∫–∞; –≤—ä–ø—Ä–µ–∫–∏ —Ç–æ–≤–∞ –≤—ä–Ω—à–Ω–∏—è—Ç –ø–∞–∑–∞—Ä –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ –¥–∞ –µ —Ç–æ–ø –∫—É–ª–∏–Ω–∞—Ä–Ω–∞ —Å–ø–∏—Ä–∫–∞.",
        pinterest: ["https://www.pinterest.com/ideas/tsukiji/935151352274/","https://www.pinterest.com/ideas/tsukiji-fish-market/945470722678/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Tsukiji+Outer+Market+street+food",
          "https://www.google.com/search?tbm=isch&q=Tsukiji+tamago+yaki+omelette",
          "https://www.google.com/search?tbm=isch&q=Tsukiji+sushi+breakfast"
        ]
      },
      { name: "Akihabara (Electric Town)", coords: [35.6984,139.7730], top: true, categories: ["District/Neighborhood"],
        img: wmf("Akihabara_Electric_Town_9999_281.jpg"),
        link: "https://en.wikipedia.org/wiki/Akihabara",
        info: "–°–ª–µ–¥ –í—Ç–æ—Ä–∞—Ç–∞ —Å–≤–µ—Ç–æ–≤–Ω–∞ –≤–æ–π–Ω–∞ —Ä–∞–π–æ–Ω—ä—Ç –ø—Ä–æ—Å–ø–µ—Ä–∏—Ä–∞ –∫–∞—Ç–æ —á–µ—Ä–µ–Ω –ø–∞–∑–∞—Ä –∏ —Ü–µ–Ω—Ç—ä—Ä –∑–∞ —Ä–∞–¥–∏–æ —á–∞—Å—Ç–∏; –ø—Ä–µ–∑ 50-—Ç–µ —Å–µ –æ—Ñ–æ—Ä–º—è –∫–∞—Ç–æ ‚Äû–ï–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏ –≥—Ä–∞–¥‚Äú –∑–∞ –±–∏—Ç–æ–≤–∞ —Ç–µ—Ö–Ω–∏–∫–∞, –∞ –æ—Ç 80-—Ç–µ ‚Äì –∑–∞ –∫–æ–º–ø—é—Ç—Ä–∏, –∏–≥—Ä–∏, –∞–Ω–∏–º–µ –∏ –º–∞–Ω–≥–∞. –î–Ω–µ—Å –µ —Å–∏–Ω–æ–Ω–∏–º –Ω–∞ ‚Äû–æ—Ç–∞–∫—É‚Äú –∫—É–ª—Ç—É—Ä–∞—Ç–∞, —Å –º–Ω–æ–≥–æ–µ—Ç–∞–∂–Ω–∏ –º–∞–≥–∞–∑–∏–Ω–∏, –∞—Ä–∫–∞–¥–∏ –∏ –º–µ–π–¥ –∫–∞—Ñ–µ–Ω–µ—Ç–∞ ‚Äì –µ–º–±–ª–µ–º–∞—Ç–∏—á–Ω–∞ –Ω–µ–æ–Ω–æ–≤–∞ –≤–∏—Ç—Ä–∏–Ω–∞ –Ω–∞ –ø–æ–ø‚Äì–∫—É–ª—Ç—É—Ä–∞—Ç–∞. (–õ—é–±–æ–ø–∏—Ç–Ω–æ: –ø—Ä–µ–∑ 2025 –≥. —Ä–∞–π–æ–Ω—ä—Ç –ø—Ä–µ–∂–∏–≤—è —Ä—è–¥—ä–∫ –º–∞—â–∞–±–µ–Ω —Ç–æ–∫–æ–≤ —Å—Ä–∏–≤ ‚Äì –Ω–µ–æ–±–∏—á–∞–π–Ω–æ –∑–∞ –¢–æ–∫–∏–æ.)",
        pinterest: ["https://www.pinterest.com/ideas/akihabara-at-night/922467311962/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Akihabara+night+neon",
          "https://www.google.com/search?tbm=isch&q=Akihabara+arcade+SEGA+GiGO",
          "https://www.google.com/search?tbm=isch&q=Akihabara+maid+cafe+exterior"
        ]
      },
      { name: "teamLab Planets TOKYO (Toyosu)", coords: [35.6491,139.7895], top: true, categories: ["Museum/Art"],
        img: wmf("At_teamLab_Planets_(48277793276).jpg"),
        link: "https://en.wikipedia.org/wiki/TeamLab_Planets_TOKYO_DMM.com",
        info: "–ò–º—ä—Ä—Å–∏–≤–µ–Ω –¥–∏–≥–∏—Ç–∞–ª–µ–Ω –º—É–∑–µ–π –Ω–∞ –∫–æ–ª–µ–∫—Ç–∏–≤–∞ teamLab, –æ—Ç–≤–æ—Ä–µ–Ω –Ω–∞ 7 —é–ª–∏ 2018 –≥. –≤ –®–∏–Ω‚Äì–¢–æ–π–æ—Å—É (–ø—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–æ –≤—Ä–µ–º–µ–Ω–µ–Ω), –∫—ä–¥–µ—Ç–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏—Ç–µ —Å–∞ –±–æ—Å–∏ –∏ –º–∏–Ω–∞–≤–∞—Ç –ø—Ä–µ–∑ –≤–æ–¥–∞ –∏ —Å–≤–µ—Ç–ª–∏–Ω–Ω–∏ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏–∏. –ü—Ä–µ–∑ 2021 –≥. –µ –¥–æ–±–∞–≤–µ–Ω–∞ —Å–µ–∫—Ü–∏—è ‚ÄûGarden‚Äú (–≤–∏—Å—è—â–∏ –æ—Ä—Ö–∏–¥–µ–∏ –∏ ‚Äû—è–π—Ü–∞‚Äú), –∞ –ø–µ—Ä–∏–æ–¥—ä—Ç –µ —É–¥—ä–ª–∂–µ–Ω –¥–æ –∫—Ä–∞—è –Ω–∞ 2027 –≥. –ü—Ä–µ–∑ —è–Ω—É–∞—Ä–∏ 2025 –≥. –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ—Ç–æ —Å–µ —Ä–∞–∑—à–∏—Ä—è–≤–∞ ~1,5 –ø—ä—Ç–∏ —Å –Ω–æ–≤–∞ –∑–æ–Ω–∞ ‚ÄûForest‚Äú (Athletic Forest, Future Park –∏ –¥—Ä.) ‚Äì –≤–µ—á–µ —á–µ—Ç–∏—Ä–∏ —Ç–µ–º–∞—Ç–∏—á–Ω–∏ –æ–±–ª–∞—Å—Ç–∏: ‚ÄûWater‚Äú, ‚ÄûGarden‚Äú, ‚ÄûForest‚Äú –∏ ‚ÄûOpen-Air‚Äú. –ï–¥–Ω–∞ –æ—Ç –Ω–∞–π-–ø–æ–ø—É–ª—è—Ä–Ω–∏—Ç–µ –∏ —Ñ–æ—Ç–æ–≥–µ–Ω–∏—á–Ω–∏ –∞—Ç—Ä–∞–∫—Ü–∏–∏ –≤ –¢–æ–∫–∏–æ.",
        pinterest: ["https://www.pinterest.com/ideas/team-lab-planets-tokyo/912243866501/","https://www.pinterest.com/ideas/teamlab-tokyo-photos/950914734148/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=teamLab+Planets+Tokyo+water+room",
          "https://www.google.com/search?tbm=isch&q=teamLab+Planets+Tokyo+orchid+garden",
          "https://www.google.com/search?tbm=isch&q=teamLab+Planets+Tokyo+mirror+room"
        ]
      },
      { name: "Tokyo Imperial Palace & East Gardens", coords: [35.6825,139.7521], top: true, categories: ["Palace/Heritage","Garden/Park"],
        img: wmf("Imperial_Palace_Tokyo_Nijubashi_Bridge.JPG"),
        link: "https://en.wikipedia.org/wiki/Tokyo_Imperial_Palace",
        info: "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏—è—Ç –¥–≤–æ—Ä–µ—Ü –µ –≤—ä—Ä—Ö—É –º—è—Å—Ç–æ—Ç–æ –Ω–∞ –∑–∞–º—ä–∫–∞ –ï–¥–æ (–æ—Å–Ω. 1457). –°–ª–µ–¥ –†–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏—è—Ç–∞ –ú–µ–π–¥–∂–∏ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä—ä—Ç —Å–µ –ø—Ä–µ–º–µ—Å—Ç–≤–∞ —Ç—É–∫ (1868‚Äì69), –∞ –¥–≤–æ—Ä—Ü–æ–≤–∏—Ç–µ —á–∞—Å—Ç–∏ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ —Å–∞ —Ä–∞–∑—Ä—É—à–∞–≤–∞–Ω–∏ –æ—Ç –ø–æ–∂–∞—Ä–∏ (–Ω–∞–ø—Ä. 1873). –ù–∞–π-–ø–æ–ø—É–ª—è—Ä–Ω–∞—Ç–∞ –≥–ª–µ–¥–∫–∞ –æ—Ç–≤—ä–Ω –µ –¥–≤–æ–π–Ω–∏—è—Ç –º–æ—Å—Ç –ù–∏–¥–∂—É–±–∞—à–∏. ‚Äû–ò–∑—Ç–æ—á–Ω–∏—Ç–µ –≥—Ä–∞–¥–∏–Ω–∏‚Äú (–æ—Ç–∫—Ä–∏—Ç–∏ –∑–∞ –ø—É–±–ª–∏–∫–∞ 1968) —Å–∞ –≤—ä—Ä—Ö—É –æ—Å—Ç–∞–Ω–∫–∏—Ç–µ –Ω–∞ –≤—ä—Ç—Ä–µ—à–Ω–∏—Ç–µ –¥–≤–æ—Ä–æ–≤–µ ‚Äì –∫–∞–º–µ–Ω–Ω–∏ –æ—Å–Ω–æ–≤–∏ –Ω–∞ –Ω–∞–π-–≤–∏—Å–æ–∫–∞—Ç–∞ –Ω—è–∫–æ–≥–∞ –¥–æ–Ω–∂–æ–Ω –∫—É–ª–∞ –æ—Ç –ø–µ—Ä–∏–æ–¥–∞ –ï–¥–æ, –ø–æ—Ä—Ç–∏—Ç–µ –û—Ç–µ‚Äì–º–æ–Ω –∏ –¥—Ä. –°–∞–º–∏—è—Ç –¥–≤–æ—Ä–µ—Ü –µ –æ—Ç–≤–æ—Ä–µ–Ω –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ —Å–∞–º–æ –¥–≤–∞ –ø—ä—Ç–∏ –≥–æ–¥–∏—à–Ω–æ (–ù–æ–≤–∞ –≥–æ–¥–∏–Ω–∞ –∏ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–µ–Ω –Ω–∞ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞); –ø–µ—Ä–∏–º–µ—Ç—ä—Ä—ä—Ç –µ –ª—é–±–∏–º–∞ –¥–∂–æ–≥–∏–Ω–≥ –æ—Ç—Å–µ—á–∫–∞.",
        pinterest: ["https://www.pinterest.com/ideas/tokyo-imperial-palace/917809979482/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Tokyo+Imperial+Palace+Nijubashi+bridge",
          "https://www.google.com/search?tbm=isch&q=Imperial+Palace+East+Gardens+stone+walls",
          "https://www.google.com/search?tbm=isch&q=Edo+Castle+ruins+Tokyo"
        ]
      },

      /* ===== Other items (blue pins) ===== */
      { name: "Shibuya Sky (Shibuya Scramble Square)", coords: [35.6581,139.7017], categories: ["Landmark/Observation"],
        img: wmf("Shibuya_Scramble_Square_-_SHIBUYA_SKY.jpg"),
        link: "https://commons.wikimedia.org/wiki/File:Shibuya_Scramble_Square_-_SHIBUYA_SKY.jpg",
        info: "360¬∞ –æ—Ç–∫—Ä–∏—Ç–∞ –ø–ª–æ—â–∞–¥–∫–∞ –Ω–∞–¥ –®–∏–±—É—è; —Ä–µ–∑–µ—Ä–≤–∏—Ä–∞–π—Ç–µ –∑–∞ –∑–∞–ª–µ–∑.",
        pinterest: ["https://www.pinterest.com/ideas/shibuya-sky/939691857801/","https://www.pinterest.com/ideas/shibuya-sky-pose/920683892243/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Shibuya+Sky+roof+helipad",
          "https://www.google.com/search?tbm=isch&q=Shibuya+Sky+sunset"
        ]
      },
      { name: "Miyashita Park", coords: [35.6612,139.6995], categories: ["District/Neighborhood","Garden/Park"],
        img: wmf("Miyashita_Park_Shibuya_Tokyo.jpg"),
        link: "https://commons.wikimedia.org/wiki/File:Miyashita_Park_Shibuya_Tokyo.jpg",
        info: "–ú–æ–¥–µ—Ä–µ–Ω —Ç—ä—Ä–≥–æ–≤—Å–∫–∏ –∫–æ–º–ø–ª–µ–∫—Å —Å –ø–æ–∫—Ä–∏–≤–µ–Ω –ø–∞—Ä–∫ (2020) ‚Äì –º–µ–∂–¥–∏–Ω–Ω–∞ —Å–ø–∏—Ä–∫–∞ –º–µ–∂–¥—É –®–∏–±—É—è –∏ –•–∞—Ä–∞–¥–∂—É–∫—É.",
        pinterest: ["https://www.pinterest.com/pin/650699846181347142/","https://www.pinterest.com/pin/448389706661993842/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Miyashita+Park+rooftop+Shibuya"
        ]
      },
      { name: "Takeshita Street (Harajuku)", coords: [35.6717,139.7030], categories: ["District/Neighborhood","Market/Food"],
        img: wmf("Takeshita_Street_(53131946200).jpg"),
        link: "https://commons.wikimedia.org/wiki/File:Takeshita_Street_(53131946200).jpg",
        info: "–ú–ª–∞–¥–µ–∂–∫–∞ –º–æ–¥–∞, —Å–ª–∞–¥–∫–∞—Ä—Å–∫–∏ –∏–∑–∫—É—à–µ–Ω–∏—è –∏ —Ç–µ–º–∞—Ç–∏—á–Ω–∏ –∫–∞—Ñ–µ–Ω–µ—Ç–∞.",
        pinterest: ["https://www.pinterest.com/ideas/harajuku-takeshita-street/954041190362/","https://www.pinterest.com/pin/86131411612456500/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Takeshita+Street+crepes",
          "https://www.google.com/search?tbm=isch&q=Harajuku+fashion+street+style"
        ]
      },
      { name: "Omotesand≈ç", coords: [35.6654,139.7124], categories: ["District/Neighborhood"],
        img: wmf("Omotesando_2007_a.JPG"),
        link: "https://commons.wikimedia.org/wiki/File:Omotesando_2007_a.JPG",
        info: "–õ—ä—Å–∫–∞–≤ –±—É–ª–µ–≤–∞—Ä–¥ —Å —Ç–æ–ø –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ñ–ª–∞–≥–º–∞–Ω-–º–∞–≥–∞–∑–∏–Ω–∏.",
        pinterest: ["https://www.pinterest.com/future_edge/tokyo-omotesando/","https://www.pinterest.com/paul109pm/omotesando/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Omotesando+architecture+Tadao+Ando",
          "https://www.google.com/search?tbm=isch&q=Omotesando+tree+lined+avenue"
        ]
      },
      { name: "Kabukich≈ç (Shinjuku)", coords: [35.6940,139.7036], categories: ["District/Neighborhood"],
        img: wmf("Gate_of_Kabuki-cho_Ichiban-gai.jpg"),
        link: "https://commons.wikimedia.org/wiki/File:Gate_of_Kabuki-cho_Ichiban-gai.jpg",
        info: "–ù–µ–æ–Ω–æ–≤–∞ –∑–æ–Ω–∞ –∑–∞ –Ω–æ—â–µ–Ω –∂–∏–≤–æ—Ç; –≤–Ω–∏–º–∞–≤–∞–π—Ç–µ —Å –∞–≥—Ä–µ—Å–∏–≤–Ω–∏ –ø—Ä–æ–º–æ—É—Ç—ä—Ä–∏.",
        pinterest: ["https://www.pinterest.com/pin/153755774770749881/","https://www.pinterest.com/pin/811562795335138676/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Kabukicho+gate+neon",
          "https://www.google.com/search?tbm=isch&q=Kabukicho+Godzilla+head+Hotel+Gracery"
        ]
      },
      { name: "Omoide Yokocho", coords: [35.6938,139.7004], categories: ["Market/Food","District/Neighborhood"],
        img: wmf("Omoide_Yokocho,_Shinjuku_(44192124461).jpg"),
        link: "https://commons.wikimedia.org/wiki/File:Omoide_Yokocho,_Shinjuku_(44192124461).jpg",
        info: "–¢–µ—Å–Ω–∏ —É–ª–∏—á–∫–∏ —Å –º–∏–Ω–∏ –∏–∑–∞–∫–∞—è –∏ –≤—ä–≥–ª–µ–Ω–æ–≤–∞ —Å–∫–∞—Ä–∞; –Ω–∞–π-–æ–∂–∏–≤–µ–Ω–æ —Å–ª–µ–¥ 17:00.",
        pinterest: ["https://www.pinterest.com/ideas/omoide-yokocho-alley/900426116037/","https://www.pinterest.com/pin/672303050646275183/"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Omoide+Yokocho+lanterns",
          "https://www.google.com/search?tbm=isch&q=Omoide+Yokocho+yakitori"
        ]
      },
      { name: "Golden Gai", coords: [35.6947,139.7041], categories: ["District/Neighborhood"],
        img: wmf("Shinjuku_Golden_Gai_(2).jpg"),
        link: "https://commons.wikimedia.org/wiki/File:Shinjuku_Golden_Gai_(2).jpg",
        info: "~200 –º–∏–∫—Ä–æ–±–∞—Ä–∞ –≤ 6 –∞–ª–µ–∏; –Ω–∞–π-–¥–æ–±—Ä–µ —Å–ª–µ–¥ 21:00 (—á–µ—Å—Ç–æ –º–∞–ª–∫–∞ —Ç–∞–∫—Å–∞).",
        pinterest: ["https://www.pinterest.com/search/pins/?q=golden%20gai%20tokyo"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Golden+Gai+bar+interior",
          "https://www.google.com/search?tbm=isch&q=Golden+Gai+alley+night"
        ]
      },
      { name: "Fuunji (Tsukemen)", coords: [35.6909,139.6983], categories: ["Market/Food","Other"],
        img: wmf("Chicken_Gyokai_Tsukemen_%40_Fuunji_%40_Shinjuku_(11324273213).jpg"),
        link: "https://commons.wikimedia.org/wiki/File:Chicken_Gyokai_Tsukemen_%40_Fuunji_%40_Shinjuku_(11324273213).jpg",
        info: "–ö—É–ª—Ç–æ–≤ —Ü—É–∫–µ–º–µ–Ω (–ø–∏–ª–µ—à–∫–æ + –∫–∞—Ü—É–æ–±—É—à–∏ –¥–∏–ø); –æ—á–∞–∫–≤–∞–π—Ç–µ –æ–ø–∞—à–∫–∞ 30‚Äì45 –º–∏–Ω.",
        pinterest: ["https://www.pinterest.com/search/pins/?q=Fuunji%20tsukemen"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Fuunji+tsukemen+Shinjuku"
        ]
      },

      /* Hotel */
      { name: "Hotel Petit Bali Higashi Shinjuku", coords: [35.6959,139.7062], categories: ["Hotel"],
        img: wmf("Higashi-shinjuku_Sta._Exit-B2.JPG"),
        link: "https://commons.wikimedia.org/wiki/File:Higashi-shinjuku_Sta._Exit-B2.JPG",
        info: "–ë—É—Ç–∏–∫–æ–≤ —Ö–æ—Ç–µ–ª –¥–æ —Å—Ç. Higashi-Shinjuku (–û–µ–¥–æ/–§—É–∫—É—Ç–æ—à–∏–Ω) ‚Äì —É–¥–æ–±–µ–Ω –∑–∞ –ö–∞–±—É–∫–∏—á–æ/–ì–æ–ª–¥–µ–Ω –ì–∞–π.",
        pinterest: ["https://www.pinterest.com/search/pins/?q=Higashi%20Shinjuku%20hotel"],
        gimages: [
          "https://www.google.com/search?tbm=isch&q=Higashi+Shinjuku+station+area+night"
        ]
      }
    ];

    // ---------- MAP ----------
    const map = L.map('map');
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '&copy; OpenStreetMap contributors' }).addTo(map);

    // Google Maps directions
    function gmapsUrl(originLatLng, destLatLng, mode = 'walking') {
      const origin = `${originLatLng.lat},${originLatLng.lng}`;
      const dest = `${destLatLng.lat},${destLatLng.lng}`;
      return `https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(origin)}&destination=${encodeURIComponent(dest)}&travelmode=${encodeURIComponent(mode)}`;
    }

    // Geolocation
    let meMarker = null, meCircle = null, myPos = null;
    function updateMyLocation(lat, lng, accuracy) {
      myPos = { lat, lng };
      const latlng = [lat, lng];
      if (!meMarker) {
        meMarker = L.marker(latlng, { title: "–ú–æ—è—Ç–∞ –ø–æ–∑–∏—Ü–∏—è" }).addTo(map).bindPopup("–¢–æ–≤–∞ —Å–∏ —Ç–∏ (GPS)");
      } else meMarker.setLatLng(latlng);
      if (!meCircle) {
        meCircle = L.circle(latlng, { radius: accuracy || 50, color: '#2563eb', fillColor: '#2563eb', fillOpacity: 0.15 }).addTo(map);
      } else {
        meCircle.setLatLng(latlng);
        meCircle.setRadius(accuracy || 50);
      }
      map.setView(latlng, 16, { animate: true });
      meMarker.openPopup();
    }
    const locateBtn = document.getElementById('locateBtn');
    locateBtn.addEventListener('click', () => {
      if (!navigator.geolocation) { showToast("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è—Ç–∞ –Ω–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞."); return; }
      locateBtn.disabled = true; locateBtn.textContent = "‚è≥ –û–ø—Ä–µ–¥–µ–ª—è–º –ø–æ–∑–∏—Ü–∏—è‚Ä¶";
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude, accuracy } = pos.coords;
          updateMyLocation(latitude, longitude, accuracy);
          locateBtn.disabled = false; locateBtn.textContent = "üìç –ü–æ–∫–∞–∂–∏ –∫—ä–¥–µ —Å—ä–º";
          showToast("–ü–æ–∑–∏—Ü–∏—è—Ç–∞ –µ –Ω–∞–º–µ—Ä–µ–Ω–∞.");
        },
        (err) => {
          locateBtn.disabled = false; locateBtn.textContent = "üìç –ü–æ–∫–∞–∂–∏ –∫—ä–¥–µ —Å—ä–º";
          showToast(err.code === 1 ? "–î–æ—Å—Ç—ä–ø—ä—Ç –¥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –µ –æ—Ç–∫–∞–∑–∞–Ω." :
                   err.code === 2 ? "–ü–æ–∑–∏—Ü–∏—è—Ç–∞ –Ω–µ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞." :
                                    "–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –≤–∑–µ–º–∞–Ω–µ –Ω–∞ –ø–æ–∑–∏—Ü–∏—è.");
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 30000 }
      );
    });

    // Modal with tabs
    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');
    const tabButtons = () => Array.from(document.querySelectorAll('.tab-btn'));

    function openModal(name, infoHTML, pins) {
      modalTitle.textContent = name;
      tabButtons().forEach(b => b.classList.toggle('active', b.dataset.tab === 'info'));
      renderTab('info', infoHTML, pins);
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden', 'false');
    }
    function closeModal() {
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
    }
    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => { if (e.target === modalBackdrop) closeModal(); });

    function renderTab(tab, infoHTML, pins, gimages) {
      if (tab === 'info') {
        modalContent.innerHTML = infoHTML;
      } else {
        const pinList = (pins || []).map(u => `<li><a href="${u}" target="_blank" rel="noopener">${u}</a></li>`).join('') || '<li>–ù—è–º–∞ –ø–æ–¥–±—Ä–∞–Ω–∏ –ª–∏–Ω–∫–æ–≤–µ.</li>';
        const gList = (gimages || []).map(u => `<li><a href="${u}" target="_blank" rel="noopener">${u}</a></li>`).join('') || '';
        modalContent.innerHTML = `
          <div style="font-size:14px;opacity:.9;margin-bottom:8px;">–ò–¥–µ–∏ –∑–∞ –∫–∞–¥—Ä–∏ –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏:</div>
          <h4 style="margin:0 0 6px;">Pinterest</h4>
          <ul style="padding-left:18px">${pinList}</ul>
          <h4 style="margin:12px 0 6px;">Google Images (–∑–∞—è–≤–∫–∏)</h4>
          <ul style="padding-left:18px">${gList}</ul>
          <div class="links" style="margin-top:10px;font-size:12px;opacity:.8">–°—ä–≤–µ—Ç: —Ç—ä—Ä—Å–µ—Ç–µ ‚Äûsunset‚Äú, ‚Äûnight‚Äú, ‚Äûlong exposure‚Äú, ‚Äûsakura‚Äú, ‚Äûrain‚Äú –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.</div>
        `;
      }
    }
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        tabButtons().forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const currentTitle = modalTitle.textContent;
        const spot = spots.find(s => s.name === currentTitle);
        const infoHTML = buildInfoHtml(spot);
        renderTab(btn.dataset.tab, infoHTML, spot.pinterest || [], spot.gimages || []);
      });
    });

    function buildInfoHtml(s) {
      const chips = s.categories?.map(t => `<span class="chip">${prettyCat(t)}</span>`).join('') || '';
      const wiki = s.link ? `<a href="${s.link}" target="_blank" rel="noopener">–£–∏–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞</a>` : '';
      const dirFromHotel = gmapsUrl(HOTEL_ORIGIN, {lat:s.coords[0],lng:s.coords[1]}, 'walking');
      const dirFromHere = myPos ? gmapsUrl(myPos, {lat:s.coords[0],lng:s.coords[1]}, 'walking') : null;

      return `
        <div class="chips">${chips}${s.top ? `<span class="chip">‚≠ê Top 10</span>` : ''}</div>
        <img src="${s.img}" alt="${s.name}">
        <p>${s.info || ''}</p>
        <div class="links" style="margin-top:8px">
          ${wiki ? wiki + ' ¬∑ ' : ''}<a href="${dirFromHotel}" target="_blank" rel="noopener">–ù–∞–≤–∏–≥–∞—Ü–∏—è –æ—Ç —Ö–æ—Ç–µ–ª–∞</a>
          ${dirFromHere ? ' ¬∑ <a href="'+dirFromHere+'" target="_blank" rel="noopener">–ù–∞–≤–∏–≥–∞—Ü–∏—è –æ—Ç —Ç—É–∫</a>' : ''}
        </div>
      `;
    }

    function popupHtml(s) {
      const dest = { lat: s.coords[0], lng: s.coords[1] };
      return `
        <div class="popup" style="max-width:340px">
          <div class="title">${s.name} ${s.top ? '‚≠ê' : ''}</div>
          <div class="meta">${s.categories?.map(prettyCat).join(' ¬∑ ')}${s.link ? ` ¬∑ <a href="${s.link}" target="_blank" rel="noopener">–£–∏–∫–∏</a>` : ''}</div>
          <img src="${s.img}" alt="${s.name}" />
          <div>${s.info || ''}</div>
          <div class="actions">
            <button class="btn" data-action="nav-hotel" data-lat="${dest.lat}" data-lng="${dest.lng}">üè® –û—Ç —Ö–æ—Ç–µ–ª–∞</button>
            <button class="btn secondary" data-action="nav-here" data-lat="${dest.lat}" data-lng="${dest.lng}">üìç –û—Ç —Ç—É–∫</button>
            <button class="btn info" data-action="more" data-name="${s.name}">‚ÑπÔ∏è –ü–æ–≤–µ—á–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
          </div>
        </div>
      `;
    }

    function prettyCat(c) {
      return c==="Temple/Shrine"?"–•—Ä–∞–º/–°–≤–µ—Ç–∏–ª–∏—â–µ"
           : c==="Landmark/Observation"?"–õ–∞–Ω–¥–º–∞—Ä–∫/–û–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏—è"
           : c==="Garden/Park"?"–ì—Ä–∞–¥–∏–Ω–∞/–ü–∞—Ä–∫"
           : c==="Market/Food"?"–ü–∞–∑–∞—Ä/–•—Ä–∞–Ω–∞"
           : c==="District/Neighborhood"?"–ö–≤–∞—Ä—Ç–∞–ª"
           : c==="Museum/Art"?"–ú—É–∑–µ–π/–ò–∑–∫—É—Å—Ç–≤–æ"
           : c==="Palace/Heritage"?"–î–≤–æ—Ä–µ—Ü/–ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ"
           : c==="Hotel"?"–•–æ—Ç–µ–ª"
           : "–î—Ä—É–≥–æ";
    }

    const markers = [];
    const layerByCategory = new Map();
    const boundsAll = L.latLngBounds();

    spots.forEach(s => {
      const classNames = s.categories?.includes("Hotel") ? "marker-dot dot-hotel"
                        : s.top ? "marker-dot dot-gold"
                        : "marker-dot";
      const marker = L.marker(s.coords, { icon: iconDiv(classNames), title: s.name });
      marker.bindPopup(popupHtml(s));
      marker.addTo(map);
      markers.push({ marker, data: s });
      boundsAll.extend(s.coords);

      (s.categories || ["Other"]).forEach(cat => {
        if (!layerByCategory.has(cat)) layerByCategory.set(cat, new Set());
        layerByCategory.get(cat).add(marker);
      });
    });

    map.fitBounds(boundsAll.pad(0.1));

    // Sidebar filters
    document.getElementById('filters').addEventListener('change', (e) => {
      if (e.target && e.target.matches('input[type="checkbox"][data-cat]')) {
        const cat = e.target.getAttribute('data-cat');
        const visible = e.target.checked;
        const set = layerByCategory.get(cat);
        if (set) { set.forEach(m => visible ? m.addTo(map) : map.removeLayer(m)); }
      }
    });

    // Global click handling (navigation + modal)
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-action]');
      if (!btn) return;
      const action = btn.getAttribute('data-action');

      if (action === 'more') {
        const name = btn.getAttribute('data-name');
        const s = spots.find(x => x.name === name);
        if (!s) { showToast("–ù—è–º–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è."); return; }
        openModal(s.name, buildInfoHtml(s), s.pinterest || []);
        // switch to photos tab keeps Pinterest+Google lists available
        return;
      }

      const lat = parseFloat(btn.getAttribute('data-lat'));
      const lng = parseFloat(btn.getAttribute('data-lng'));
      const dest = { lat, lng };

      if (action === 'nav-hotel') {
        const url = gmapsUrl(HOTEL_ORIGIN, dest, 'walking');
        window.open(url, '_blank');
      } else if (action === 'nav-here') {
        if (!myPos) { showToast("–ü—ä—Ä–≤–æ –Ω–∞—Ç–∏—Å–Ω–µ—Ç–µ ‚Äû–ü–æ–∫–∞–∂–∏ –∫—ä–¥–µ —Å—ä–º‚Äú."); return; }
        const url = gmapsUrl(myPos, dest, 'walking');
        window.open(url, '_blank');
      }
    });
  </script>
</body>
</html>
